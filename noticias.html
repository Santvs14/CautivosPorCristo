<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Cache-Control" content="no-store, no-cache, must-revalidate, max-age=0">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Noticias - Cautivos por Cristo</title>
    <link rel="icon" href="Logof.png" type="image/png">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
        <link href="https://fonts.googleapis.com/css?family=Montserrat:300,400,500,600,700|Roboto:300,400,500,700" rel="stylesheet">

    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/9.1.3/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.1.3/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.1.3/firebase-storage-compat.js"></script>

    <style>
      /* Estilos generales */
        body {
            font-family: 'Roboto', sans-serif;
            margin: 0;
            padding: 0;
            color: #333;
            background: #f4f4f4;
            font-size: 16px; /* Tamaño de fuente por defecto */
        }

        /* Estilos para pantallas medianas */
        @media (min-width: 768px) {
            body {
                font-size: 18px;
            }
        }

        /* Encabezado */
        header {
            background: linear-gradient(45deg,#1E3A5F,#1E3A5F, #89CFF0, #4682B4, #1E3A5F, #89CFF0); padding: 10px;
            padding: 1em 0;
            color: white;
            text-align: center;
            position: relative;
            width: 100%;
            box-sizing: border-box;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        nav ul {
            list-style: none;
            padding: 0;
            margin: 0;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
        }

        nav ul li {
            margin: 0 10px;
        }

        nav ul li a {
            color: white;
            padding: 10px 20px;
            display: inline-block;
            text-decoration: none;
            font-size: 1.1em;
            transition: background-color 0.3s, color 0.3s, transform 0.3s;
        }

        nav ul li a:hover,
        nav ul li a.active {
            background-color: #1D84EA;
            color: white;
            border-radius: 5px;
            transform: scale(1.05);
        }


@media (max-width: 600px) {
            nav ul {
                flex-direction: column;
                gap: 10px;
            }

            nav ul li a {
                padding: 10px;
            }
        }



        /* Contenido principal */
        main {
            padding: 40px 20px;
            max-width: 1200px;
            margin: 0 auto;
        }

        /* Sección Hero */
        .hero {
            text-align: center;
            padding: 20px;
            background: #1e3d7c;
            color: white;
            border-radius: 10px;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3);
            margin-bottom: 40px;
        }

        .hero h1 {
            font-size: 2.5em;
            margin: 0;
        }

        .hero p {
            font-size: 1.2em;
            margin: 10px 0 0;
        }

        /* Lista de noticias */
        .news-list {
            margin-top: 40px;
            display: flex;
            flex-wrap: wrap;
                justify-content: space-between;
            
                overflow-y: auto; /* Permite el desplazamiento vertical */

                        max-height:70vh; /* Asegura que el contenedor ocupe al menos la altura de la pantalla */
                        align-items: center;

                         }


        

.news-item:hover{
    background: #5552;
    max-height: 50vh;
}

       .news-item {
    background: white;
    border-radius: 5px;
    padding: 15px;
    width: calc(23.343%); /* Un tercio del ancho sin margen */
    margin-bottom: 0; /* Elimina el margen inferior */
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    transition: transform 0.3s;
}

.news-item img {
    width: 100%;
    height: auto;
    border-radius: 5px;
    margin-bottom: 10px;
}

        .news-item:hover {
            transform: scale(1.02);
        }

       

        .news-item .date {
            font-size: 0.9em;
            color: #666;
            margin-bottom: 10px;
        }

        
       /* Modal */
.modal {
    display: none;
    position: fixed;
    z-index: 1001;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.8);
    padding-top: 60px;
    overflow: hidden;
}

.modal-content {
    background-color: #fff;
    margin: auto;
    padding: 20px;
    border: 1px solid #888;
    width: 80%;
    max-height: 90vh;
    overflow-y: auto;
    border-radius: 10px;
    box-sizing: border-box;
    position: relative;
}

.modal-header {
    text-align: center;
    margin-bottom: 20px;
}

.modal-header h3 {
    font-size: 2em;
    margin-top: 10px;
}

.modal-body {
    text-align: justify;
    line-height: 1.5;
    font-size: 1.5em;
    max-width: 90%;
    margin: 0 auto;
}

.modal-body img {
    float: left;
    margin-right: 20px;
    margin-bottom: 10px;
    width: 40%; /* Ajustar el ancho de la imagen */
    border-radius: 5px;
}


        .modal-text {
            margin-bottom: 20px;
        }

        .modal-image img {
            width: 100%;
            max-height: 300px;
            object-fit: cover;
            border-radius: 10px;
        }


        .close {
    color: #aaa;
    font-size: 34px; /* Aumenta el tamaño de la fuente para que la "X" sea más grande */
    font-weight: bold;
    position: absolute;
    right: 20px;
    top: -14px;
    margin-bottom: 3px;
    cursor: pointer;
}

.close:hover{

  color: red;
}


        .comments-section {
            width: 100%;
            margin-top: 20px;


        }

        

        .comments-list {
            max-height: 200px;
            overflow-y: auto;
            margin-bottom: 20px;
            padding-right: 10px;
        }

        .comment-item {
            background-color: #f4f4f4;
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 10px;
            margin-bottom: 10px;
        }

        #commentName,
        #commentText {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            margin-bottom: 10px;
            box-sizing: border-box;
        }

               



        #commentText {
            height: 80px;
            resize: vertical;
        }

        #submitComment {
            background-color: #1D84EA;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
            transition: background-color 0.3s;
        }

        #submitComment:hover {
            background-color: #155a8a;
        }

        /* Post-It */
        .post-it {
            position: fixed;
            top: 173px;
            right: 30px;
            width: 100px;
            background-color: #fffa87;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.2);
            text-align: center;
            z-index: 1001;
            transition: right 0.3s, top 0.3s;
        }

        .post-it img {
            width: 50px;
            height: 50px;
            border-radius: 70%;
            margin-bottom: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            left: 1em;
            position: relative;
        }

        .post-it h4 {
            margin: 0;
            font-size: 12px;
            color: #333;
        }

        /* Media Queries */
        @media (max-width: 768px) {
            header {
                padding: 1em 0;
            }

            nav ul {
                flex-direction: column;
                align-items: center;
                position: relative; /* Se asegura de que el menú no sea fijo */
            }

nav ul li {
    margin: -12px 10px;
}

            .hero h1 {
                font-size: 2em;
            }

            .hero p {
                font-size: 1.2em;
            }

            .news-item {
                width: calc(100% - 20px);
            }

            .modal {
                width: 90%;
                max-width: 500px;
            }
        }

        @media (max-width: 480px) {
            .hero h1 {
                font-size: 1.8em;
            }

            .hero p {
                font-size: 1.1em;
            }
        }
    
footer {
    text-align: center;
    padding: 1em 0;
    background: linear-gradient(45deg,#1E3A5F, #89CFF0, #4682B4, #1E3A5F, #89CFF0);
    color: white;
    margin-top: 20px;
    position: relative;
    width: 100%;
    box-sizing: border-box;
    box-shadow: 0 -2px 4px rgba(0, 0, 0, 0.1);
}


footer p {
            margin: 0;
            font-size: 0.9em;
        }




    </style>
</head>
<body>
    <header>
        <nav>
            <ul>
                <img src="Logof.png" alt="Logo" style="height: 50px;">
                <li><a href="index.html">Inicio</a></li>
                <li><a href="nosotros.html">Nosotros</a></li>
                <li><a href="director.html">Acerca del Director</a></li>
                <li><a href="valores.html">Valores</a></li>
                <li><a href="proposito.html">Propósito</a></li>
                <li><a href="musicos.html">Músicos y Colaboradores</a></li>
                <li><a href="noticias.html" class="active">Noticias</a></li>
                <li><a href="contacto.html">Contacto</a></li>


            </ul>
        </nav>
    </header>


    <main>

<section class="hero">
            <h1>Bienvenidos a Noticias Cautivos por Cristo</h1>
            <p>Las últimas noticias y actualizaciones</p>
        </section>


        <div class="news-list">
            <h2>Cargando Noticias...</h2>
            <!-- Noticias cargadas dinámicamente aquí -->
        </div>

 

    <!-- Modal para ver la noticia completa -->
    <div id="newsModal" class="modal">
    <div class="modal-content">
        <span class="close">&times;</span>
        <div class="modal-body">
            <div class="left-column">
                <div class="modal-header">
                    <img id="modalImage" src="" alt="Imagen de la noticia">
                    <div>
                        <h3 id="modalTitle"></h3>
                    </div>
                </div>
                <div id="modalContent"></div>
            </div>
            <div class="right-column">
                <div class="comments-section">
                    <h3>Comentarios</h3>
                    <div id="commentsList" class="comments-list"></div>
                    <input type="text" id="commentName" placeholder="Tu nombre" required>
                    <textarea id="commentText" placeholder="Escribe un comentario" required></textarea>
                    <button id="submitComment">Comentar</button>
                </div>
                <div class="post-it">
            <img src="b2.png" alt="Nota">
            <h4>Publicado por: Emanuel Polanco</h4>
        </div>
    </main>
            </div>
        </div>
    </div>
</div>


    <footer>
         <!-- Derechos reservados -->
  <div style="text-align: center; margin-top: 18px; font-size: 1.3em;">
    <p>&copy; 2024 Cautivos por Cristo.<strong style="color:black;">Todos los derechos reservados.</strong></p>
  </div>
       
    </footer>
    <script>
        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyDtyfEs2KrKsb46Cbu1IkHUkAkEqH8DbPc",
            authDomain: "cautivosporcristo-83d52.firebaseapp.com",
            databaseURL: "https://cautivosporcristo-83d52-default-rtdb.firebaseio.com",
            projectId: "cautivosporcristo-83d52",
            storageBucket: "cautivosporcristo-83d52.appspot.com",
            messagingSenderId: "154012445021",
            appId: "1:154012445021:web:0fc2e317eae82d25bb0bf9c",
            measurementId: "G-T2P5PKHXBN"
        };

        // Inicializar Firebase
        const app = firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

           function loadNews() {
    const newsList = document.querySelector('.news-list');

    db.ref('news').on('value', snapshot => {
        newsList.innerHTML = ''; // Limpiar la lista antes de volver a cargar

        const newsArray = [];

        snapshot.forEach(childSnapshot => {
            const news = childSnapshot.val();
            const newsId = childSnapshot.key;
            newsArray.push({ id: newsId, ...news });
        });

         // Ordenar las noticias por fecha, de más reciente a más antigua
        newsArray.sort((a, b) => new Date(b.date) - new Date(a.date));

        // Iterar sobre las noticias ordenadas y agregarlas al DOM
        newsArray.forEach(news => {
            const newsItem = document.createElement('div');
            newsItem.className = 'news-item';

            // Abreviar el contenido si es muy largo
            let shortContent = news.content;
            if (news.content.length > 100) {
                shortContent = news.content.substring(0, 100) + '... <a href="#" onclick="openModal(\'' + news.id + '\')">Leer más</a>';
            }

            newsItem.innerHTML = `
                <h3 onclick="openModal('${news.id}')">${news.title}</h3>
                <p>${shortContent}</p>
                <div class="date">${news.date}</div>
                ${news.imageUrl ? `<img src="${news.imageUrl}" alt="Imagen de la noticia">` : ''}
            `;

            // Insertar la noticia al principio de la lista
            newsList.prepend(newsItem);
        });
    });
}
function openModal(newsId) {
    const modal = document.getElementById('newsModal');
    const modalTitle = document.getElementById('modalTitle');
    const modalContent = document.getElementById('modalContent');
    const modalImage = document.getElementById('modalImage');
    const commentsList = document.getElementById('commentsList');
    const commentName = document.getElementById('commentName');
    const commentText = document.getElementById('commentText');
    const submitComment = document.getElementById('submitComment');

    db.ref(`news/${newsId}`).once('value').then(snapshot => {
        const news = snapshot.val();
        modalTitle.textContent = news.title;

        // Reemplazar saltos de línea dobles con <p> y simples con <br>
        let formattedContent = news.content
            .replace(/\n\n/g, '</p><p>')
            .replace(/\n/g, '<br>');  // Doble <br> para un solo salto de línea visual
        formattedContent = `<p>${formattedContent}</p>`;

        modalContent.innerHTML = formattedContent;
        modalImage.src = news.imageUrl || '';
    });

    db.ref(`comments/${newsId}`).on('value', snapshot => {
        commentsList.innerHTML = ''; // Limpiar la lista antes de volver a cargar

        snapshot.forEach(childSnapshot => {
            const comment = childSnapshot.val();

            const commentItem = document.createElement('div');
            commentItem.className = 'comment-item';
            commentItem.innerHTML = `
                <div class="comment-name">${comment.name}</div>
                <div class="comment-text">${comment.text}</div>
            `;
            commentsList.appendChild(commentItem);
        });
    });

    submitComment.onclick = () => {
        const name = commentName.value;
        const text = commentText.value;

        if (name && text) {
            db.ref(`comments/${newsId}`).push({
                name: name,
                text: text
            }).then(() => {
                commentName.value = '';
                commentText.value = '';
            }).catch(error => {
                console.error("Error al agregar comentario: ", error);
            });
        } else {
            alert('Por favor, completa ambos campos.');
        }
    };

    const closeModal = document.querySelector('.close');
    closeModal.onclick = () => {
        modal.style.display = "none";
    };

    window.onclick = event => {
        if (event.target === modal) {
            modal.style.display = "none";
        }
    };

    modal.style.display = "block";
}


        // Cargar noticias al inicio
        loadNews();
    </script>
</body>
</html>



